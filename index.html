<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>DiscordJS</title>
  <link rel="shortcut icon" type="image/png" href="images/ico_full.png"/>
  <link rel="stylesheet" href="stylesheet/prism.css">
  <link rel="stylesheet" href="stylesheet/style.css">
  <link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.6.1/css/all.css" integrity="sha384-gfdkjb5BdAXd+lj+gudLWI+BXq4IuLW5IT+brZEZsLFm++aCMlF1V92rMkPaX4PP" crossorigin="anonymous">
  <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.4.1/css/bootstrap.min.css" integrity="sha384-Vkoo8x4CGsO3+Hhxv8T/Q5PaXtkKtu6ug5TOeNV6gBiFeWPGFN9MuhOf23Q9Ifjh" crossorigin="anonymous">
</head>
<body>

  <!-- Introduction -->
  <div class="banner" style="display: block !important; background-image: linear-gradient(rgba(0,0,0,0.5),rgba(0,0,0,0.5)), url('https://i.redd.it/gmyldjq35fy51.png');">
    <div id="class-languages">
      <i class="fab fa-html5 mr-1" style="color: #f84820"></i>
      <i class="fab fa-css3-alt mr-1" style="color: #1970b5"></i>
      <i class="fab fa-js-square mr-1" style="color: #FFE01B"></i>
    </div>
    <div class="container">
      <div class="main">
        <img src="images/logo.png" alt="">
        <div class="class-title">
          <h1>Commandes dans DiscordJS</h1>
        </div>
      </div>
      <p>On va explorer comment créer des commandes pour ton bot Discord</p>
      <a class="btn btn-primary tl-button" href="#challenge" role="button">Commencer !</a>
    </div>
  </div>

  <div class="container" id="challenge">

    <div class="accordion" id="accordionExample">

      <!-- Étape 1 -->
      <div class="card">
        <div class="card-header" id="heading1">
          <h2 class="mb-0">
            <button class="btn btn-link done task" type="button" data-toggle="collapse" data-target="#collapse1" aria-expanded="false" aria-controls="collapse1">
              Étape 1 - Défis à compléter avant
            </button>
          </h2>
        </div>
        <div id="collapse1" class="collapse show" aria-labelledby="heading1" data-parent="#accordionExample">
          <div class="card-body">
            <p>Avant d'entamer ce défi, assure toi d'avoir déjà fait ceux ci:</p>
            <ul>
              <li><a href="">Discord.js - Ping Pong</a></li>
            </ul>
            <p>Ensuite, assure-toi que tu sois bien connecté à ton compte <a href="https://repl.it">Repl.It</a>, et que tu aies ton projet de la fois passée.</p>
          </div>
        </div>
      </div>

      <!-- Étape 2 -->
      <div class="card">
        <div class="card-header" id="heading2">
          <h2 class="mb-0">
            <button class="btn btn-link task" type="button" data-toggle="collapse" data-target="#collapse2" aria-expanded="false" aria-controls="collapse2">
              Étape 2 - Des commandes simples
            </button>
          </h2>
        </div>
        <div id="collapse2" class="collapse" aria-labelledby="heading2" data-parent="#accordionExample">
          <div class="card-body">
            <p>Si tu utilises Discord de temps à autres, tu as sûrement remarqué que pour interagir avec un bot tu mets un "!" devant ton message. Ceci est pour que le bot sache qu'on lui parle et que ce n'est pas un message normal.</p>

            <p>La fois passée on avait créé un code qui répondait "Pong" quand on disait "Ping". Une commande plus adaptée serait au bot de répondre "Pong" lorsqu'on dit "!ping". Ceci sera donc la commande <code>ping</code>.</p>

            <pre><code class="language-js">
              if(msg.content === "!ping") {
                msg.reply("Pong");
              }
            </code></pre>

            <p>On peut faire plusieurs commandes comme ceci en mettent plusieurs <code>if</code> à la suite l'un de l'autre:</p>

            <pre><code class="language-js">
              if(msg.content === "!ping") {
                msg.reply("Pong");
              }
              if(msg.content === "!yin") {
                msg.reply("Yang");
              }
            </code></pre>

            <p>Essaie d'implémenter jusqu'à 5 commandes (jeux de mots/rimes (Ce que tu veux en fait)) et montres les à ton animateur.</p>

            <p>Tu remarquera sûrement que ceci est assez long à écrire avec tous les <code>msg.content ==== "...."</code> qui semblent redondants. Il y a une façon alternative que j'aimerai que tu essaies: le bloc <code>switch</code></p>

            <p>Voici quelques commandes avec des <code>if</code>:</p>

            <pre><code class="language-js">
              if(msg.content === "!ping") {
                msg.reply("Pong");
              }
              if(msg.content === "!yin") {
                msg.reply("Yang");
              }
              if(msg.content === "!hey") {
                msg.reply("Hello");
              }
            </code></pre>

            <p>Avec un <code>switch</code>, on a ceci:</p>

            <pre><code class="language-js">
              switch(msg.content) {
                case("!ping"):
                  msg.reply("Pong");
                  break;
                case("!yin"):
                  msg.reply("Yang");
                  break;
                case("!hey"):
                  msg.reply("Hello");
                  break;
              }
            </code></pre>

            <p>Le <code>switch</code> est utilisé quand tu as beaucoup de <code>if</code> qui comparent tous une même valeur à un ensemble de valeurs. Ici, <code>msg.content</code> est comparé à une valeur dans chaque <code>if</code>, donc un peut utiliser un <code>switch</code>.</p>
          </div>
        </div>
      </div>

      <!-- Étape 3 -->
      <div class="card">
        <div class="card-header" id="heading3">
          <h2 class="mb-0">
            <button class="btn btn-link task" type="button" data-toggle="collapse" data-target="#collapse3" aria-expanded="false" aria-controls="collapse3">
              Étape 3 - Des commandes à arguments
            </button>
          </h2>
        </div>
        <div id="collapse3" class="collapse" aria-labelledby="heading3" data-parent="#accordionExample">
          <div class="card-body">
            <p>On va maintenant ajouter des arguments à nos commandes. Qu'est ce que cela veut dire? Expliquons cela par un example: On va créer une commande <code>!dire</code>. On devra écrire un mot derrière, qui est le mot que le bot doit dire.</p>  

            <p>Donc quand on écrit <code>!dire Bonjour</code>, le bot doit répondre "Bonjour". Simple non? Mais on veut aussi garder nos commandes précédentes!</p>

            <p>En fait, on doit trouver une manière de séparer la commande (Le premier mot avec un "!" devant) et le reste.</p>

            <p>On a une méthode qui fait cela!</p>

            <pre><code class="language-js">
              "Bonjour je suis Daniel".split(" "); // => ["Bonjour", "je", "suis", "Daniel"]
            </code></pre>

            <p>La méthode <code>split()</code> est exécutée sur une chaîne de caractères (Du texte), et sépare ce texte à chaque fois qu'il voit l'argument donné. Dans l'example d'avant, l'argument était un espace, donc il sépare simplement les mots. Mais</p>

            <pre><code class="language-js">
              "Bonsoir je suis Daniel".split("i"); // => ["Bonso", "r je su" "s Dan", "el"]
            </code></pre>

            <p>Vois-tu comment on pourra s'en servir de ceci?</p>

            <p>En effet, on va séparer le message avec les espaces. On doit aussi se souvenir du message séparé, donc on le mets dans une variable.</p>

            <pre><code class="language-js">
              const msg_sep = msg.content.split(" ");
            </code></pre>

            <p>Ensuite, au lieu de vérifier si le message entier vaut "!ping" ou "!yin" etc, on va vérifier si le premier mot du message vaut cela.</p>

            <p>On peut retirer le premier mot avec:</p>

            <pre><code class="language-js">
              const premier_mot = msg_sep[0];
            </code></pre>

            <p>Souviens toi qu'en programmation on compte à partir de 0, donc le 0e mot est en fait le 1er mot, comme voulu. Dans ton <code>switch</code>, tu peux alors remplacer <code>msg.content</code> par <code>premier_mot</code>. On a donc quelque chose du style:</p>

            <pre><code class="language-js">
              const msg_sep = msg.content.split(" ");
              const premier_mot = msg_sep[0];
              switch(premier_mot) {
                case("!ping"):
                  msg.reply("Pong");
                  break;
                // ...
              }
            </code></pre>

            <p>Jusque là, on a simplement ajouté du code pour rien... Mais on peut ajouter un nouveau <code>case</code> avec "!dire". Dans ce cas, le bot doit répondre le deuxième mot du message.</p>

            <p>Essaie de le faire! Souviens toi qu'en language ordinateur le 2e mot est en fait le mot numéro 1. Si tu as besoin d'aide, demande à un animateur.</p>

            <p>Il y a uniquement un problème avec ceci. Imaginons que l'on veuille que le bot dise "Salut David". On va donc faire la commande "!dire Salut David". Mais pour l'instant notre bot répond simplement le 2e mot de la commande, c'est-à-dire "Salut". En fait il doit répondre tous les mots qui viennent après.</p>

            <p>Pour ce faire on va utiliser une boucle. </p>

            <pre><code class="language-js">
              const mots = [];
              for(let i=..., i<..., i++) {
                mots.push(msg_sep[i]);
              }
              msg.reply(mots.join(' '));
            </code></pre>

            <p>Dans ce code, tu dois remplacer les '...' par les valeurs appropriées. Le premier '...' représente le mot auquel on commence (Le 2e, numéro 1 en language ordinateur). Le deuxième '...' représente le nombre de mots (Utilise le <code>.length</code> ;-) )</p>
          </div>
        </div>
      </div>


      <!-- Étape 4 -->
      <div class="card">
        <div class="card-header" id="heading4">
          <h2 class="mb-0">
            <button class="btn btn-link task" type="button" data-toggle="collapse" data-target="#collapse4" aria-expanded="false" aria-controls="collapse4">
              Étape 4 - Des commandes à réponses aléatoires
            </button>
          </h2>
        </div>
        <div id="collapse4" class="collapse" aria-labelledby="heading4" data-parent="#accordionExample">
          <div class="card-body">
            <p>On va maintenant explorer la fonction <code>random()</code>. En anglais, "random" veut dire "aléatoire". Imaginons on veut ajouter une commande "!random" qui répond un mot aléatoire d'une liste. Pour commencer, on va juste répondre un nombre aléatoire.</p>

            <p>Ajoute un nouveau <code>case</code> pour "!random" qui répond <code>Math.random()</code>. Ceci va répondre un nombre aléatoire entre 0 et 1</p>

            <pre><code class="language-js">
              Math.random(); // => 0.6839520323555972
            </code></pre>

            <p>Mais on ne veut pas un nombre à virgules aléatoire entre 0 et 1. On veut un élément aléatoire d'une liste. Donc on veut un indice aléatoire entre 0 et le nombre d'éléments de la liste. Pour avoir un nombre entier entre 0 et N pour un certain N, on prend d'abord un nombre aléatoire à virgules entre 0 et N et ensuite on prend la partie entière.</p>

            <pre><code class="language-js">
              Math.random() * 10; // => 7.464961919625317
              Math.floor( Math.random() * 10 ); // => 7
            </code></pre>

            <p>Pour prendre la partie entière, on utilise la fonction <code>Math.floor()</code>.</p>

            <p>Si on veut un élément aléatoire d'une liste, on doit d'abord avoir une liste. Définis une liste avec quelques mots.</p>

            <pre><code class="language-js">
              const liste = ["Bonjour", "Au revoir", "Hello", "Hey", "Salut", "À plus"];
            </code></pre>

            <p>J'ai ici une liste de 6 éléments. J'ai donc besoin d'un nombre aléatoire entre 0 et 5 (Parce qu'on commence à 0). Pour avoir un nombre entier aléatoire entre 0 et 5, on fait:</p>

            <pre><code class="language-js">
              Math.floor( Math.random() * 6 );
            </code></pre>

            <p>On veut donc répondre un mot aléatoire de la liste. Rappelle toi que pour prendre un élément de la liste, on dit <code>liste[...]</code>, où <code>...</code> représente l'indice qu'on veut. Ici, cela doit être un nombre aléatoire:</p>

            <pre><code class="language-js">
              liste[ Math.floor( Math.random() * 6 ) ];
            </code></pre>

            <p>Imaginons on veut changer la liste par après. Par example, si on veut rajouter des éléments. On doit alors changer le <code>6</code> dans la commande. On pourrait simplement coder le <code>6</code> à être la longueur de la liste. </p>

            <p>Pour avoir la longueur de la liste en JavaScript, on utilise <code>.length</code>. Donc pour avoir la longueur de la liste, on peut utiliser:</p>

            <pre><code class="language-js">
              liste.length; // => 6
            </code></pre>

            <p>Change le <code>6</code> en <code>liste.length</code> et change un peu la liste. Normalement tout devrait encore marcher!</p>
          </div>
        </div>
      </div>

      <!-- Étape 5 -->
      <div class="card">
        <div class="card-header" id="heading5">
          <h2 class="mb-0">
            <button class="btn btn-link task" type="button" data-toggle="collapse" data-target="#collapse5" aria-expanded="false" aria-controls="collapse5">
              Étape 5 - Limiter à un canal
            </button>
          </h2>
        </div>
        <div id="collapse5" class="collapse" aria-labelledby="heading5" data-parent="#accordionExample">
          <div class="card-body">
            <p>Imaginons que certains commandes doivent uniquement marcher dans le canal "test-bot". Et d'autres uniquement dans le canal "general". Ou un autre canal.</p>

            <p>On peut répondre uniquement si on est dans le bon canal. Tu sais peut être que plusieurs canaux peuvent avoir le même nom sur Discord, donc on ne peut pas utiliser le nom pour savoir dans quel canal on est.</p>

            <p>En fait chaque canal a une ID unique. Cet ID ressemble à "791424989370515457", et on ne peut donc pas simplement le deviner. Il nous faut donc le trouver dans Discord.</p>

            <p>Dans Discord, vas dans les réglages d'utilisateurs:</p>

            <img src="./images/UserSettings.png" alt="UserSettings" width="60%">

            <p>Ici va dans "Appearance". Tout en bas, tu trouveras "Developer Mode". Active cette option.</p>

            <img src="./images/DeveloperMode.png" alt="DeveloperMode" width="70%">

            <p>Maintenant on peut voir l'ID de chaque canal. Va sur le canal et fais un clique droit. En bas il y aura l'option "Copy Channel ID". Ceci copie l'ID du canal!</p>

            <p>Tu verra donc que l'ID du canal "test-bot" est "791424989370515457".</p>

            <p>On peut vérifier si le canal dans lequel a été envoyé le message est le canal "test-bot", on fait la condition suivante:</p>

            <pre><code class="language-js">
              if( msg.channel.id === "791424989370515457" ) {
                // ...
              }
            </code></pre>

            <p>Essaie donc de limiter certaines commandes au canal "test-bot", ou à un autre canal!</p>

            <p>CHALLENGE: Tu peux aussi faire en sorte que ton bot réponde différentes choses en fonction du canal. Par example, dans un premier canal le bot répond "Bonjour", et dans un autre il répond "Au Revoir".</p>
          </div>
        </div>
      </div>

      <!-- Étape 6 -->
      <div class="card">
        <div class="card-header" id="heading6">
          <h2 class="mb-0">
            <button class="btn btn-link task" type="button" data-toggle="collapse" data-target="#collapse6" aria-expanded="false" aria-controls="collapse6">
              Étape 6 - Vérifie que tu as bien tout fait
            </button>
          </h2>
        </div>
        <div id="collapse6" class="collapse" aria-labelledby="heading6" data-parent="#accordionExample">
          <div class="card-body">
            <p>Il est maintenant temps de vérifier que tu as réussi toutes les tâches d'aujourd'hui! Les noms des commandes sont pas importantes, ce sont leurs fonctionalités qui sont importantes.</p>
            
            <ul>
              <li>Ton bot doit avoir un message standart <code>!standart</code> qui répond une réponse prédefinie</li>
              <li>Il peut aussi avoir une commande qui répond différemment en fonction de l'argument (Deuxième mot). Ceci peut simplement être répeter le deuxième mot.</li>
              <li>Il peut aussi répondre un message aléatoire à une commande.</li>
              <li>Certaines commandes marchent différemment dans différents canaux. Certaines ne marchent même pas dans certains canaux.</li>
            </ul>

            <p>Si ton bot sait faire toutes ces étapes, il est fonctionel pour passer à la fiche suivante!</p>
          </div>
        </div>
      </div>

    </div> 
  </div>



<div class="footer">
  <div class="footer-links">
    <a href="https://techieslab.be/"><i class="fas fa-globe"></i></i></a>
    <a href="https://www.facebook.com/TechiesLabBrussels"><i class="fab fa-facebook"></i></a>
    <a href="https://twitter.com/TechiesLab"><i class="fab fa-twitter"></i></a>
  </div>
  <div class="footer-copyright">
    <a href="https://openclassrooms.com/fr/courses/1603881-apprenez-a-creer-votre-site-web-avec-html5-et-css3/3298561-faites-votre-mise-en-page-avec-flexbox#/id/r-3298711" rel="noopener noreferrer" target="_blank" class="alert-link copyright">
      <i class="far fa-copyright"></i>
      2020 Techies Lab ASBL. All rights reserved.
    </a>
  </div>
</div>
<script src="https://code.jquery.com/jquery-3.4.1.slim.min.js" integrity="sha384-J6qa4849blE2+poT4WnyKhv5vZF5SrPo0iEjwBvKU7imGFAV0wwj1yYfoRSJoZ+n" crossorigin="anonymous"></script>
<script src="https://cdn.jsdelivr.net/npm/popper.js@1.16.0/dist/umd/popper.min.js" integrity="sha384-Q6E9RHvbIyZFJoft+2mJbHaEWldlvI9IOYy5n3zV9zzTtmI3UksdQRVvoxMfooAo" crossorigin="anonymous"></script>
<script src="https://stackpath.bootstrapcdn.com/bootstrap/4.4.1/js/bootstrap.min.js" integrity="sha384-wfSDF2E50Y2D1uUdj0O3uMBJnjuUD4Ih7YwaYd1iqfktj0Uod8GCExl3Og8ifwB6" crossorigin="anonymous"></script>
<script src="javascript/prism.js"></script>
</body>
</html>
