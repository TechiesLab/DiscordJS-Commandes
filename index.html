<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>DiscordJS #2</title>
  <link rel="shortcut icon" type="image/png" href="images/ico_full.png"/>
  <link rel="stylesheet" href="stylesheet/prism.css">
  <link rel="stylesheet" href="stylesheet/style.css">
  <link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.6.1/css/all.css" integrity="sha384-gfdkjb5BdAXd+lj+gudLWI+BXq4IuLW5IT+brZEZsLFm++aCMlF1V92rMkPaX4PP" crossorigin="anonymous">
  <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.4.1/css/bootstrap.min.css" integrity="sha384-Vkoo8x4CGsO3+Hhxv8T/Q5PaXtkKtu6ug5TOeNV6gBiFeWPGFN9MuhOf23Q9Ifjh" crossorigin="anonymous">
</head>
<body>

  <!-- Introduction -->
  <div class="banner" style="display: block !important; background-image: linear-gradient(rgba(0,0,0,0.5),rgba(0,0,0,0.5)), url(images/parrot.jpg);">
    <div id="class-languages">
      <i class="fab fa-html5 mr-1" style="color: #f84820"></i>
      <i class="fab fa-css3-alt mr-1" style="color: #1970b5"></i>
      <i class="fab fa-js-square mr-1" style="color: #FFE01B"></i>
    </div>
    <div class="container text-center">
      <div class="main">
        <img src="images/logo.png" alt="">
        <div class="class-title">
          <h1>Discord<br> Fiche 2</h1>
        </div>
      </div>
      <p>Conna√Æs-tu Discord? Et les bots Discord? On peut les programmer en JavaScript gr√¢ce √† la librarie <b>DiscordJS</b>!</p>
      <a class="btn btn-primary tl-button" href="#challenge" role="button">Commencer !</a>
    </div>
  </div>

  <div class="container" id="challenge">

    <div class="accordion" id="accordionExample">

      <!-- √âtape 1 -->
      <div class="card">
        <div class="card-header" id="heading1">
          <h2 class="mb-0">
            <button class="btn btn-link done task" type="button" data-toggle="collapse" data-target="#collapse1" aria-expanded="false" aria-controls="collapse1">
              √âtape 1 - D√©fis √† compl√©ter avant
            </button>
          </h2>
        </div>
        <div id="collapse1" class="collapse show" aria-labelledby="heading1" data-parent="#accordionExample">
          <div class="card-body">
            <p>Avant d'entamer ce d√©fi, assure toi d'avoir d√©j√† fait ceux ci:</p>
            <ul>
              <li><a href="https://techieslab.github.io/DiscordJS-PingPong/" target="_blank">DiscordJS - Ping Pong</a></li>
            </ul>
            <p>Ensuite, assure-toi que tu sois bien connect√© √† ton compte <a href="https://repl.it">Repl.it</a>, et que tu aies ton projet de la fois pass√©e.</p>
          </div>
        </div>
      </div>

      <!-- √âtape 2 -->
      <div class="card">
        <div class="card-header" id="heading2">
          <h2 class="mb-0">
            <button class="btn btn-link task" type="button" data-toggle="collapse" data-target="#collapse2" aria-expanded="false" aria-controls="collapse2">
              √âtape 2 - Des commandes simples
            </button>
          </h2>
        </div>
        <div id="collapse2" class="collapse" aria-labelledby="heading2" data-parent="#accordionExample">
          <div class="card-body">
            <p>Si tu utilises Discord de temps √† autre, tu as s√ªrement remarqu√© que pour interagir avec un bot tu ajoutes un <strong>!</strong> devant ton message. Ce point d'exclamation sert √† indiquer au bot qu'il s'agit d'un message pour lui et non d'un message "normal".</p>

            <p>La fois pass√©e on avait cr√©√© un code qui r√©pondait <strong>Pong</strong> quand on √©crivait le message <strong>Ping</strong>. Une commande plus adapt√©e pour le bot serait <strong>!ping</strong> :

            <pre><code class="language-js">
              if (msg.content === "!ping") {
                msg.reply("Pong");
              }
            </code></pre>

            <p>On peut cr√©er plusieurs commandes comme celle-ci en ajoutant plusieurs <code>if</code> l'un √† la suite de l'autre:</p>

            <pre><code class="language-js">
              if (msg.content === "!ping") {
                msg.reply("Pong");
              }
              if (msg.content === "!yin") {
                msg.reply("Yang");
              }
            </code></pre>

            <p>Essaie d'impl√©menter jusqu'√† 5 commandes (jeux de mots, rimes, ce que tu veux en fait...) et montre-les √† ton animateur.</p>

            <p>Tu remarqueras sans doute que tous les <code>msg.content === "...."</code>, c'est assez long √† √©crire! Et puis c'est redondant. Il y a une fa√ßon alternative que j'aimerais que tu essaies: le bloc <code>switch</code></p>

            <p>Voici quelques commandes avec la syntaxe <code>if</code>:</p>

            <pre><code class="language-js">
              if (msg.content === "!ping") {
                msg.reply("Pong");
              }
              if (msg.content === "!yin") {
                msg.reply("Yang");
              }
              if (msg.content === "!hey") {
                msg.reply("Hello");
              }
            </code></pre>

            <p>Alors qu'avec la syntaxe <code>switch</code>, on a plut√¥t ceci:</p>

            <pre><code class="language-js">
              switch(msg.content) {
                case("!ping"):
                  msg.reply("Pong");
                  break;
                case("!yin"):
                  msg.reply("Yang");
                  break;
                case("!hey"):
                  msg.reply("Hello");
                  break;
              }
            </code></pre>

            <p>La syntaxe <code>switch</code> est utilis√©e quand tu as beaucoup de <code>if</code> qui comparent tous une m√™me valeur √† un ensemble de valeurs. Ici, <code>msg.content</code> est compar√© √† une valeur dans chaque <code>if</code>, donc un peut utiliser un <code>switch</code>.</p>
          </div>
        </div>
      </div>

      <!-- √âtape 3 -->
      <div class="card">
        <div class="card-header" id="heading3">
          <h2 class="mb-0">
            <button class="btn btn-link task" type="button" data-toggle="collapse" data-target="#collapse3" aria-expanded="false" aria-controls="collapse3">
              √âtape 3 - Le bot perroquet ü¶ú
            </button>
          </h2>
        </div>
        <div id="collapse3" class="collapse" aria-labelledby="heading3" data-parent="#accordionExample">
          <div class="card-body">
            <p>On va cr√©er une nouvelle commande <code>!dire</code> un peu sp√©ciale.</p>

            <p>Si on √©crit le message<code>!dire Bonjour</code> dans Discord, en bon perroquet, notre bot devra r√©pondre... "Bonjour".</p>
            <p>Si on √©crit le message<code>!dire Cacahou√®te</code>, notre bot perroquet r√©pondra "Cacahou√®te".</p>
            <p>Simple, non? En passant, on doit garder nos commandes pr√©c√©dentes!</p>

            <p>On doit trouver une mani√®re de s√©parer la commande en plusieurs mots: le premier mot avec un "!" devant et le reste.</p>

            <p>La bonne nouvelle, c'est qu'en JavaScript, il y a une fonction qui fait cela. C'est la fonction <code>split()</code> :</p>

            <pre><code class="language-js">
              "Bonjour je suis Daniel".split(" "); // => ["Bonjour", "je", "suis", "Daniel"]
            </code></pre>

            <p>La fonction <code>split()</code> est ex√©cut√©e sur une cha√Æne de caract√®res (du texte), et s√©pare ce texte √† chaque fois qu'il voit l'argument donn√©. Dans l'example d'avant, l'argument √©tait un espace, donc il s√©pare le texte apr√®s chaque espace...</p>

            <p>Si on avait donn√© la lettre "i" comme argument, voici ce qu'on aurait:</p>


            <pre><code class="language-js">
              "Bonsoir je suis Daniel".split("i"); // => ["Bonso", "r je su" "s Dan", "el"]
            </code></pre>

            <p>√Ä ton avis, comment pourrait-on se servir de la fonction <code>split()</code> pour notre bot?</p>

            <p>
              <a class="btn btn-primary" data-toggle="collapse" href="#collapseHint" role="button" aria-expanded="false" aria-controls="collapseHint">Indice</a>
            </p>
            <div class="collapse mb-3" id="collapseHint">
              <div class="card card-body">
                <p>Tu pourrais s√©parer le message re√ßu par le bot en fonction des espaces. Par ailleurs, pour que l'ordinateur se souvienne du message s√©par√©, il faut le stocker dans une variable.</p>

              </div>
            </div>

            <p>
              <a class="btn btn-danger" data-toggle="collapse" href="#collapseAnswer" role="button" aria-expanded="false" aria-controls="collapseAnswer">R√©ponse</a>
            </p>
            <div class="collapse mb-3" id="collapseAnswer">
              <div class="card card-body">
              <pre><code class="language-js">
                const msgSep = msg.content.split(" ");
              </code></pre>

              </div>
            </div>

            <p>Une fois ton message s√©par√© en plusieurs mots, tu dois v√©rifier si le <strong>premier mot</strong> du message √©quivaut √† la commande "!ping" ou "!yin", etc.</p>

            <p>Pour acc√©der au premier mot de ta liste, tu peux utiliser l'index. En JavaScript, les listes commencent toujours √† l'index...</p>

            <pre><code class="language-js">
              const premierMot = msgSep[???];
            </code></pre>

            <p>
              <a class="btn btn-danger" data-toggle="collapse" href="#collapseAnswer" role="button" aria-expanded="false" aria-controls="collapseAnswer">R√©ponse</a>
            </p>
            <div class="collapse mb-3" id="collapseAnswer">
              <div class="card card-body">
                Les listes commencent √† l'index 0. Ton code aura donc l'air de ceci:
              <pre><code class="language-js">
                const premierMot = msgSep[0];
              </code></pre>
              </div>
            </div>


            <p>Dans ta syntaxe <code>switch</code>, tu peux maintenant remplacer <code>msg.content</code> par <code>premierMot</code>. On a donc quelque chose du style:</p>

            <pre><code class="language-js">
              const msgSep = msg.content.split(" ");
              const premierMot = msgSep[0];

              switch(premierMot) {
                case("!ping"):
                  msg.reply("Pong");
                  break;
                // ...
              }
            </code></pre>

            <p>Jusque l√†, on a simplement rallong√© notre code... Mais on peut maintenant utiliser le deuxi√®me mot du message avec notre commande "!dire". Si le message est <code>!dire Bonjour</code>, le bot r√©pond "Bonjour". Si le message est <code>!dire Yooo</code>, le bot r√©pond Yooo...</p>

            <p>Essaie de le faire! Souviens toi qu'en JavaScript, le 2e mot est en fait le mot √† l'index 1. Si tu as besoin d'aide, demande √† un animateur.</p>

            <p>Il y a un petit un probl√®me avec ceci. Imaginons que l'on veuille que le bot perroquet dise "Salut David". On va lancer la commande "!dire Salut David". Mais pour l'instant notre bot r√©pond simplement le 2√®me mot de la commande, c'est-√†-dire "Salut". En fait il doit r√©pondre tous les mots qui viennent apr√®s.</p>

            <p>Pour ce faire on va utiliser une boucle. </p>

            <pre><code class="language-js">
              const mots = [];
              for(let i=..., i<..., i++) {
                mots.push(msgSep[i]);
              }
              msg.reply(mots.join(' '));
            </code></pre>

            <p>Dans ce code, tu dois remplacer les '...' par les valeurs appropri√©es. Le premier '...' repr√©sente le mot auquel on commence (le 2√®me, soit index 1 en JavaScript). Le deuxi√®me '...' repr√©sente le nombre de mots (Utilise le <code>.length</code> ;-) )</p>
          </div>
        </div>
      </div>


      <!-- √âtape 4 -->
      <div class="card">
        <div class="card-header" id="heading4">
          <h2 class="mb-0">
            <button class="btn btn-link task" type="button" data-toggle="collapse" data-target="#collapse4" aria-expanded="false" aria-controls="collapse4">
              √âtape 4 - Le perroquet foufou: r√©ponses al√©atoires
            </button>
          </h2>
        </div>
        <div id="collapse4" class="collapse" aria-labelledby="heading4" data-parent="#accordionExample">
          <div class="card-body">
            <p>On va maintenant explorer la fonction <code>random()</code>. En anglais, "random" veut dire "al√©atoire". Imaginons on veut ajouter une commande "!random" qui r√©pond un mot al√©atoire d'une liste. Pour commencer, on va juste r√©pondre un nombre al√©atoire.</p>

            <p>Ajoute un nouveau <code>case</code> pour "!random" qui r√©pond <code>Math.random()</code>. Ceci va r√©pondre un nombre al√©atoire entre 0 et 1</p>

            <pre><code class="language-js">
              Math.random(); // => 0.6839520323555972
            </code></pre>

            <p>Mais on ne veut pas un nombre √† virgule al√©atoire entre 0 et 1. On veut un √©l√©ment al√©atoire d'une liste. On veut un indice al√©atoire entre 0 et le nombre d'√©l√©ments de la liste. Pour avoir un nombre entier entre 0 et N, on prend d'abord un nombre al√©atoire √† virgules entre 0 et N et ensuite on prend la partie enti√®re.</p>

            <pre><code class="language-js">
              Math.random() * 10; // => 7.464961919625317
              Math.floor( Math.random() * 10 ); // => 7
            </code></pre>

            <p>Pour prendre la partie enti√®re, on utilise la fonction <code>Math.floor()</code>.</p>

            <p>Si on veut un √©l√©ment al√©atoire d'une liste, on doit d'abord avoir une liste. D√©finis une liste avec quelques mots.</p>

            <pre><code class="language-js">
              const liste = ["Bonjour", "Au revoir", "Hello", "Hey", "Salut", "√Ä plus"];
            </code></pre>

            <p>J'ai ici une liste de 6 √©l√©ments. J'ai donc besoin d'un nombre al√©atoire entre 0 et 5 (parce qu'on commence √† 0). Pour avoir un nombre entier al√©atoire entre 0 et 5, on fait:</p>

            <pre><code class="language-js">
              Math.floor( Math.random() * 6 );
            </code></pre>

            <p>On veut donc r√©pondre un mot al√©atoire de la liste. Rappelle toi que pour prendre un √©l√©ment de la liste, on dit <code>liste[...]</code>, o√π <code>...</code> repr√©sente l'indice qu'on veut. Ici, cela doit √™tre un nombre al√©atoire:</p>

            <pre><code class="language-js">
              liste[ Math.floor( Math.random() * 6 ) ];
            </code></pre>

            <p>Imaginons on veut changer la liste par apr√®s. Par example, si on veut rajouter des √©l√©ments. On doit alors changer le <code>6</code> dans la commande. On pourrait simplement coder le <code>6</code> √† √™tre la longueur de la liste. </p>

            <p>Pour avoir la longueur de la liste en JavaScript, on utilise <code>.length</code>. Donc pour avoir la longueur de la liste, on peut utiliser:</p>

            <pre><code class="language-js">
              liste.length; // => 6
            </code></pre>

            <p>Change le <code>6</code> en <code>liste.length</code> et change un peu la liste. Normalement tout devrait encore marcher!</p>
          </div>
        </div>
      </div>

      <!-- √âtape 5 -->
      <div class="card">
        <div class="card-header" id="heading5">
          <h2 class="mb-0">
            <button class="btn btn-link task" type="button" data-toggle="collapse" data-target="#collapse5" aria-expanded="false" aria-controls="collapse5">
              √âtape 5 - Limiter √† un canal
            </button>
          </h2>
        </div>
        <div id="collapse5" class="collapse" aria-labelledby="heading5" data-parent="#accordionExample">
          <div class="card-body">
            <p>Imaginons que certains commandes doivent uniquement marcher dans le canal "test-bot". Et d'autres uniquement dans le canal "general". Ou un autre canal.</p>

            <p>On peut r√©pondre uniquement si on est dans le bon canal. Tu sais peut √™tre que plusieurs canaux peuvent avoir le m√™me nom sur Discord, donc on ne peut pas utiliser le nom pour savoir dans quel canal on est.</p>

            <p>En fait chaque canal a une ID unique. Cet ID ressemble √† "791424989370515457", et on ne peut donc pas simplement le deviner. Il nous faut donc le trouver dans Discord.</p>

            <p>Dans Discord, vas dans les r√©glages d'utilisateurs:</p>

            <img src="./images/UserSettings.png" alt="UserSettings" width="60%">

            <p>Ici va dans "Appearance". Tout en bas, tu trouveras "Developer Mode". Active cette option.</p>

            <img src="./images/DeveloperMode.png" alt="DeveloperMode" width="70%">

            <p>Maintenant on peut voir l'ID de chaque canal. Va sur le canal et fais un clique droit. En bas il y aura l'option "Copy Channel ID". Ceci copie l'ID du canal!</p>

            <p>Tu verra donc que l'ID du canal "test-bot" est "791424989370515457".</p>

            <p>On peut v√©rifier si le canal dans lequel a √©t√© envoy√© le message est le canal "test-bot", on fait la condition suivante:</p>

            <pre><code class="language-js">
              if ( msg.channel.id === "791424989370515457" ) {
                // ...
              }
            </code></pre>

            <p>Essaie donc de limiter certaines commandes au canal "test-bot", ou √† un autre canal!</p>

            <p>CHALLENGE: Tu peux aussi faire en sorte que ton bot r√©ponde diff√©rentes choses en fonction du canal. Par example, dans un premier canal le bot r√©pond "Bonjour", et dans un autre il r√©pond "Au Revoir".</p>
          </div>
        </div>
      </div>

      <!-- √âtape 6 -->
      <div class="card">
        <div class="card-header" id="heading6">
          <h2 class="mb-0">
            <button class="btn btn-link task" type="button" data-toggle="collapse" data-target="#collapse6" aria-expanded="false" aria-controls="collapse6">
              √âtape 6 - V√©rifie que tu as bien tout fait
            </button>
          </h2>
        </div>
        <div id="collapse6" class="collapse" aria-labelledby="heading6" data-parent="#accordionExample">
          <div class="card-body">
            <p>Il est maintenant temps de v√©rifier que tu as r√©ussi toutes les t√¢ches d'aujourd'hui! Les noms des commandes sont pas importantes, ce sont leurs fonctionalit√©s qui sont importantes.</p>

            <ul>
              <li>Ton bot doit avoir un message standart <code>!standart</code> qui r√©pond une r√©ponse pr√©definie</li>
              <li>Il peut aussi avoir une commande qui r√©pond diff√©remment en fonction de l'argument (Deuxi√®me mot). Ceci peut simplement √™tre r√©peter le deuxi√®me mot.</li>
              <li>Il peut aussi r√©pondre un message al√©atoire √† une commande.</li>
              <li>Certaines commandes marchent diff√©remment dans diff√©rents canaux. Certaines ne marchent m√™me pas dans certains canaux.</li>
            </ul>

            <p>Si ton bot sait faire toutes ces √©tapes, il est fonctionel pour passer √† la fiche suivante!</p>
          </div>
        </div>
      </div>

    </div>
  </div>



  <div class="footer">
    <div class="footer-links">
      <a href="https://techieslab.be/"><i class="fas fa-globe"></i></i></a>
      <a href="https://www.facebook.com/TechiesLabBrussels"><i class="fab fa-facebook"></i></a>
      <a href="https://www.linkedin.com/company/techies-lab/"><i class="fab fa-linkedin"></i></a>
      <a href="https://twitter.com/TechiesLab"><i class="fab fa-twitter"></i></a>
    </div>
    <div class="footer-copyright">
      <a href="https://techieslab.be" rel="noopener noreferrer" target="_blank" class="alert-link copyright">
        <i class="far fa-copyright"></i>
        2021 Techies Lab ASBL. All rights reserved.
      </a>
    </div>
  </div>
<script src="https://code.jquery.com/jquery-3.4.1.slim.min.js" integrity="sha384-J6qa4849blE2+poT4WnyKhv5vZF5SrPo0iEjwBvKU7imGFAV0wwj1yYfoRSJoZ+n" crossorigin="anonymous"></script>
<script src="https://cdn.jsdelivr.net/npm/popper.js@1.16.0/dist/umd/popper.min.js" integrity="sha384-Q6E9RHvbIyZFJoft+2mJbHaEWldlvI9IOYy5n3zV9zzTtmI3UksdQRVvoxMfooAo" crossorigin="anonymous"></script>
<script src="https://stackpath.bootstrapcdn.com/bootstrap/4.4.1/js/bootstrap.min.js" integrity="sha384-wfSDF2E50Y2D1uUdj0O3uMBJnjuUD4Ih7YwaYd1iqfktj0Uod8GCExl3Og8ifwB6" crossorigin="anonymous"></script>
<script src="javascript/prism.js"></script>
</body>
</html>
